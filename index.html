<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>AquaGuard Permit Checking Tool</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
:root{
  --bg:#0b1220;
  --panel:#111827;
  --border:#1f2937;
  --text:#e5e7eb;
  --muted:#94a3b8;
  --green:#22c55e;
  --orange:#f97316;
  --red:#ef4444;
}
*{box-sizing:border-box}
body{
  margin:0;
  background:var(--bg);
  color:var(--text);
  font-family:system-ui,-apple-system,Segoe UI,Roboto;
}
.container{
  max-width:960px;
  margin:auto;
  padding:16px;
}
.card{
  background:var(--panel);
  border:1px solid var(--border);
  border-radius:14px;
  padding:16px;
  margin-bottom:16px;
}
img.logo{
  display:block;
  margin:0 auto 12px;
  max-width:280px;
}
img.creator{
  display:block;
  margin:10px auto 6px;
  max-width:120px;
  border-radius:12px;
}
.tabs{
  display:flex;
  gap:10px;
  margin-bottom:12px;
}
.tab{
  flex:1;
  padding:10px;
  text-align:center;
  border:1px solid var(--border);
  border-radius:10px;
  cursor:pointer;
}
.tab.active{background:#020617}
.hidden{display:none}
label{display:block;margin:10px 0 4px;color:var(--muted)}
textarea,input,select,button{
  width:100%;
  padding:10px;
  border-radius:10px;
  border:1px solid var(--border);
  background:#020617;
  color:var(--text);
}
button.primary{
  background:var(--green);
  color:#052e16;
  font-weight:700;
  border:none;
  margin-top:10px;
}
.tag{
  display:inline-block;
  padding:4px 10px;
  border-radius:999px;
  border:1px solid var(--border);
  font-size:.8rem;
  margin-right:6px;
}
.result{
  margin-top:12px;
  padding:14px;
  border-radius:12px;
}
.result.ok{background:rgba(34,197,94,.15)}
.result.warn{background:rgba(249,115,22,.15)}
.result.bad{background:rgba(239,68,68,.15)}
.confbar{
  height:10px;
  background:#1f2937;
  border-radius:999px;
  overflow:hidden;
  margin-top:6px;
}
.confbar > div{height:100%;width:0;transition:.4s}
small{color:var(--muted)}
hr{border:0;border-top:1px solid var(--border);margin:16px 0}
footer{text-align:center}
a{color:#93c5fd;text-decoration:none}
</style>
</head>

<body>
<div class="container">

<img src="aquaguard-logo.PNG" class="logo" alt="AquaGuard Foundation Solutions">

<div class="tabs">
  <div class="tab active" onclick="showTab('checker')">Checker</div>
  <div class="tab" onclick="showTab('instructions')">Instructions</div>
</div>

<!-- CHECKER -->
<div id="checker" class="card">

<label>Property Address / City / ZIP (Georgia)</label>
<textarea id="address" rows="3"
placeholder="AquaGuard Foundation Solutions
375 Northridge Road
Atlanta GA 30350"></textarea>

<label>Service Type</label>
<select id="service">
  <option value="slab_piers">Slab Piers (Exempt)</option>
  <option value="helical_piers">Helical Piers</option>
  <option value="push_piers">Push Piers</option>
  <option value="wall_anchors">Wall Anchors (All Types)</option>
  <option value="other_structural">Other Structural Work</option>
</select>

<button class="primary" onclick="runCheck()">Check Permit</button>

<div style="margin-top:10px">
  <span class="tag" id="detected">Detected: —</span>
  <span class="tag" id="confidenceTag">Confidence: —</span>
</div>

<div class="confbar">
  <div id="confidenceBar"></div>
</div>

<div id="result" class="result hidden"></div>

<hr>

<button onclick="openQPublic()">Open qPublic</button>

<hr>

<h3>Export Audit PDF</h3>
<label>Inspector Name (CFI)</label>
<input id="inspName" placeholder="Mr. Mustache">

<label>Inspector Initials</label>
<input id="inspInit" placeholder="MM">

<button onclick="exportPDF()">Export PDF</button>

<div id="audit"></div>

</div>

<!-- INSTRUCTIONS -->
<div id="instructions" class="card hidden">
<h3>How This Tool Works</h3>
<ul>
  <li>Paste a full address, city, ZIP, or any combination.</li>
  <li>Displayed city reflects common/mailing usage.</li>
  <li>Permit authority is determined by county jurisdiction.</li>
  <li>Structural services typically require permits.</li>
  <li>Slab piers are exempt statewide per AquaGuard policy.</li>
  <li>Confidence reflects data strength, not legality.</li>
</ul>
<p>
  <strong>Ruleset:</strong> AquaGuard Permit Instructions (1-22-2026)<br>
  <a href="Permit_Instructions_2026-01-22.pdf" target="_blank">
    View original permit instructions (PDF)
  </a>
</p>
</div>

<footer class="card">
  <img src="matthew-urbanski.PNG" class="creator" alt="Matthew Urbanski">
  <strong>Tool Created By</strong><br>
  Matthew Urbanski, CFI<br>
  <small>
    Internal decision-support tool for AquaGuard Foundation Solutions.<br>
    Always verify parcel jurisdiction using qPublic.
  </small>
  <br><br>
  <a href="Permit_Instructions_2026-01-22.pdf" target="_blank">
    View source permit instructions (PDF)
  </a>
</footer>

</div>

<script>
/* (No changes to logic — same as last version) */
</script>

</body>
</html>
