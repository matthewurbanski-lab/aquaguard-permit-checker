<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>AquaGuard Permit Checking Tool</title>

<style>
:root{
  --bg:#0f172a;
  --card:#111827;
  --muted:#94a3b8;
  --text:#e5e7eb;
  --accent:#22c55e;
  --warn:#f97316;
  --danger:#ef4444;
  --ok:#10b981;
}
body{
  margin:0;
  background:var(--bg);
  color:var(--text);
  font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto;
}
.container{max-width:960px;margin:0 auto;padding:16px;}
.header-image{text-align:center;margin:24px 0 16px;}
.header-image img{
  max-width:100%;
  height:auto;
  border-radius:12px;
}
.card{
  background:var(--card);
  border-radius:12px;
  padding:16px;
  margin-bottom:16px;
}
label{display:block;margin-top:10px;font-size:.9rem;color:var(--muted);}
input,select{
  width:100%;
  padding:10px;
  border-radius:8px;
  border:1px solid #374151;
  background:#0b1220;
  color:var(--text);
}
button{
  padding:10px 14px;
  border-radius:8px;
  border:0;
  font-weight:600;
  cursor:pointer;
}
.primary{background:var(--accent);color:#052e16;}
.ghost{background:#0b1220;border:1px solid #374151;color:var(--text);}
.row{display:grid;grid-template-columns:1fr;gap:12px;}
@media(min-width:720px){.row{grid-template-columns:2fr 1fr;}}
.result{margin-top:14px;padding:14px;border-radius:12px;}
.yes{background:rgba(239,68,68,.15);}
.no{background:rgba(16,185,129,.15);}
.maybe{background:rgba(249,115,22,.15);}
.tag{
  display:inline-block;
  margin-right:8px;
  margin-top:6px;
  padding:4px 8px;
  border-radius:999px;
  font-size:.75rem;
  border:1px solid #374151;
  color:var(--muted);
}
.tabs{display:flex;gap:8px;margin-bottom:12px;}
.tab{
  padding:8px 12px;
  border-radius:8px;
  border:1px solid #374151;
  cursor:pointer;
}
.tab.active{background:#0b1220;}
footer{
  margin-top:24px;
  font-size:.85rem;
  color:var(--muted);
}
a{color:#93c5fd;text-decoration:none;}
a:hover{text-decoration:underline;}
</style>
</head>

<body>
<div class="container">

<!-- TOP BANNER -->
<div class="header-image">
  <img src="aquaguard-logo.PNG" alt="AquaGuard Permit Checking Tool">
</div>

<div class="tabs">
  <div class="tab active" onclick="showTab('checker')">Checker</div>
  <div class="tab" onclick="showTab('instructions')">Instructions</div>
</div>

<!-- CHECKER TAB -->
<div id="checker">

<div class="card">
  <label>Property Address (Georgia)</label>
  <input id="address" placeholder="875 Pickens Industrial Dr NE, Marietta, GA 30062">

  <div class="row">
    <div>
      <label>Work Type</label>
      <select id="work">
        <option value="helical">Helical Piers</option>
        <option value="push">Push Piers</option>
        <option value="wall">Wall Anchors</option>
        <option value="intellijack">IntelliJacks</option>
        <option value="beam">Supplemental Beams</option>
        <option value="carbon">Carbon Fiber Strips</option>
        <option value="slab">Slab Piers</option>
      </select>
    </div>
    <div style="align-self:end">
      <button class="primary" onclick="runCheck()">Check Permit</button>
    </div>
  </div>

  <div style="margin-top:10px">
    <span class="tag" id="detected">Detected: —</span>
    <span class="tag" id="mode">Mode: Auto</span>
  </div>

  <div id="result" class="result maybe" style="display:none"></div>
</div>

<div class="card">
  <strong>Manual City / County Override</strong>
  <small style="display:block;margin-top:4px">
    Use only after verifying jurisdiction via qPublic.
  </small>

  <label>City (or type Unincorporated)</label>
  <input id="manualCity" placeholder="Marietta or Unincorporated">

  <label>County</label>
  <input id="manualCounty" placeholder="Cobb">

  <button class="ghost" style="margin-top:10px" onclick="runCheck(true)">
    Apply Manual Override
  </button>
</div>

<div class="card">
  <button class="ghost" onclick="openQPublic()">Open qPublic</button>
</div>

</div>

<!-- INSTRUCTIONS TAB -->
<div id="instructions" style="display:none">

<div class="card">
<h3>How to Use This Tool</h3>
<ol>
<li>Enter the full Georgia property address.</li>
<li>Select the scope of work.</li>
<li>Click <strong>Check Permit</strong>.</li>
<li>Review detected city and county.</li>
<li>Verify jurisdiction using qPublic.</li>
<li>Apply manual override only if verified.</li>
</ol>
</div>

<div class="card">
<h3>Reference Document</h3>
<p>
  <a href="Permit_Instructions_2026-01-22.pdf" target="_blank">
    Permit Instructions – As of 1/22/2026 (PDF)
  </a>
</p>
</div>

</div>

<footer>
<strong>Ruleset:</strong> 1-22-2026<br><br>

<div style="display:flex;gap:12px;align-items:center;">
  <img src="matthew-urbanski.PNG"
       alt="Matthew Urbanski, Certified Field Inspector"
       style="height:64px;border-radius:8px;">
  <div>
    <strong>Tool created by:</strong><br>
    Matthew Urbanski, CFI<br>
    <a href="mailto:Matthew.Urbanski@AquaGuard.net">
      Matthew.Urbanski@AquaGuard.net
    </a><br>
    <a href="tel:14705681681">470-568-1681</a>
  </div>
</div>

<br>
<a href="Permit_Instructions_2026-01-22.pdf" target="_blank">
View official permit instructions (PDF)
</a><br><br>

<small>
Guidance only. Jurisdiction must always be verified before contract execution.
</small>
</footer>

</div>

<script>
function normalize(s){
  return s ? s.trim().replace(/\s+/g," ").replace(/\b\w/g,c=>c.toUpperCase()) : "";
}
function pickCity(addr){
  const keys=["city","town","village","municipality","hamlet","locality","suburb"];
  for(const k of keys){ if(addr[k]) return normalize(addr[k]); }
  return "Unincorporated";
}
async function geocode(q){
  const res=await fetch(
    `https://nominatim.openstreetmap.org/search?format=json&addressdetails=1&limit=1&q=${encodeURIComponent(q)}`
  );
  const data=await res.json();
  if(!data[0]) throw "No result";
  return data[0].address;
}
function showResult(type,html){
  const el=document.getElementById("result");
  el.className="result "+type;
  el.innerHTML=html;
  el.style.display="block";
}
function runCheck(manual=false){
  document.getElementById("mode").textContent=manual?"Mode: Manual Override":"Mode: Auto";
  (async()=>{
    try{
      let city,county;
      if(manual){
        city=normalize(document.getElementById("manualCity").value);
        county=normalize(document.getElementById("manualCounty").value);
      }else{
        const addr=await geocode(document.getElementById("address").value);
        city=pickCity(addr);
        county=normalize((addr.county||"").replace(/ County$/i,""));
      }
      document.getElementById("detected").textContent=`Detected: ${city}, ${county} County`;
      showResult("yes","<strong>Result generated.</strong><br>Verify via qPublic before proceeding.");
    }catch{
      showResult("maybe","<strong>Unable to determine.</strong><br>Please verify manually.");
    }
  })();
}
function showTab(tab){
  document.getElementById("checker").style.display=tab==="checker"?"block":"none";
  document.getElementById("instructions").style.display=tab==="instructions"?"block":"none";
  document.querySelectorAll(".tab").forEach(t=>t.classList.remove("active"));
  document.querySelectorAll(".tab")[tab==="checker"?0:1].classList.add("active");
}
function openQPublic(){
  window.open("https://qpublic.schneidercorp.com","_blank");
}
</script>

</body>
</html>
